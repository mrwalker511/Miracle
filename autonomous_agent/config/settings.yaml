# Main system configuration
system:
  name: "Autonomous Coding Agent"
  version: "0.1.0"
  environment: "development"  # development, production

orchestrator:
  max_iterations: 15
  circuit_breaker:
    warning_threshold: 12
    hard_stop: 15
  checkpoint_interval: 5  # Save state every N iterations
  timeout_per_iteration: 600  # 10 minutes

sandbox:
  engine: "docker"
  workspace_root: "./sandbox/workspace"
  resource_limits:
    cpu_count: 1
    memory_mb: 1024
    execution_timeout: 300  # 5 minutes
    disk_quota_mb: 500
  network:
    enabled: false  # Require approval
    allowed_domains: []  # Populated after approval

safety:
  ast_scan: true
  bandit_scan: true
  block_operations:
    - "eval"
    - "exec"
    - "compile"
    - "__import__"
    - "open"  # Outside sandbox
  require_approval:
    - "network_request"
    - "subprocess"
    - "file_write_outside_sandbox"
    - "dependency_install"

dependencies:
  mode: "allowlist"  # allowlist, auto (future), manual
  allowlist_file: "config/allowed_deps.json"
  auto_approve: false

logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  format: "json"  # json, text
  outputs:
    - "console"
    - "file"
  file_path: "logs/agent.log"
  rotation: "100MB"

metrics:
  enabled: true
  collect:
    - "iteration_duration"
    - "token_usage"
    - "test_pass_rate"
    - "error_types"
    - "pattern_matches"
  export_interval: 60  # seconds
